record(sscan,"$(P)MONO01_OPT_SCAN") {
  field(DESC, "Intensity opt record")
  field(MPTS, "$(MAXPTS=100)")
  field(ATIME, ".1")
  field(PDLY, ".1")
}

record(sseq,"$(P)MONO01_OPT_SCAN_PARMS_DFT") {
  field(DESC,"Restore OPT_SCAN settings")
  field(LNK1,"$(P)MONO01_OPT_SCAN_PARMS.PPV")
  field(STR1,"MCTMONO01MOT06")
  field(DLY1,"0.1")
  field(LNK2,"$(P)MONO01_OPT_SCAN_PARMS.RPV")
  field(STR2,"MCTMONO01MOT06.RBV")
  field(DLY2,"0.1")
  field(LNK3,"$(P)MONO01_OPT_SCAN_PARMS.DPV")
  field(STR3,"MCTTBL01DAQ01:SumAll:MeanValue_RBV")
  field(DLY3,"0.1")
  field(LNK4,"$(P)MONO01_OPT_SCAN_PARMS.NP")
  field(DO4,"41")
  field(DLY4,"0.1")
  field(LNK5,"$(P)MONO01_OPT_SCAN_PARMS.SP")
  field(DO5,"-.1")
  field(DLY5,"0.1")
  field(LNK6,"$(P)MONO01_OPT_SCAN_PARMS.EP")
  field(DO6,".1")
  field(DLY6,"0.1")
  field(LNK7,"$(P)MONO01_OPT_SCAN.PDLY")
  field(DO7,".1")
  field(DLY7,"0.1")
  field(LNK8,"$(P)MONO01_OPT_SCAN_P2")
  field(DO8,"0")
  field(DLY8,"0.1")
  field(LNK9,"$(P)MONO01_OPT_SCAN_PARMS.AR")
  field(STR9,"RELATIVE")
  field(DLY9,"0.1")
  field(LNKA,"$(P)MONO01_OPT_SCAN_PARMS.AFT")
  field(STRA,"PEAK POS")
  field(SELM,"All")
}

record(scanparm,"$(P)MONO01_OPT_SCAN_PARMS") {
  field(DESC, "Load OPT_SCAN settings")
  field(PREC,"6")
  field(PRE,"4")
  field(OPRE,"$(P)MONO01_OPT_SCAN.CMND  CA NMS")
  field(OSM,"$(P)MONO01_OPT_SCAN.P1SM  CA NMS")
  field(AR,"RELATIVE")
  field(OAR,"$(P)MONO01_OPT_SCAN.P1AR  CA NMS")
  field(AFT,"PEAK POS")
  field(OAFT,"$(P)MONO01_OPT_SCAN.PASM  CA NMS")
  field(PPV,"MCTMONO01MOT06")
  field(RPV,"MCTMONO01MOT06.RBV")
  field(OPPV,"$(P)MONO01_OPT_SCAN.P1PV  CA NMS")
  field(ORPV,"$(P)MONO01_OPT_SCAN.R1PV  CA NMS")
  field(SP,"-.1")
  field(OSP,"$(P)MONO01_OPT_SCAN.P1SP  CA NMS")
  field(EP,".1")
  field(OEP,"$(P)MONO01_OPT_SCAN.P1EP  CA NMS")
  field(NP,"41")
  field(ONP,"$(P)MONO01_OPT_SCAN_PARMS2.NP CA NMS")
  field(SC,"1")
  field(OSC, "")
  field(IMP,"$(P)MONO01_OPT_SCAN.MPTS  NPP NMS")
  field(IACT,"$(P)MONO01_OPT_SCAN.BUSY  NPP NMS")
  field(DPV,"MCTTBL01DAQ01:SumAll:MeanValue_RBV")
  field(ODPV,"$(P)MONO01_OPT_SCAN.D01PV CA NMS")
  field(OLOAD,"$(P)MONO01_OPT_SCAN_PARMS2.LOAD CA NMS")
  field(OGO,"$(P)MONO01_OPT_SCAN_PARMS2.GO CA NMS")
}

record(scanparm,"$(P)MONO01_OPT_SCAN_PARMS2") {
  field(DESC, "Load OPT_SCAN settings for P2")
  field(PREC,"6")
  field(PRE,"4")
  field(OPRE,"")
  field(OSM,"$(P)MONO01_OPT_SCAN.P2SM  CA NMS")
  field(AR,"RELATIVE")
  field(OAR,"$(P)MONO01_OPT_SCAN.P2AR  CA NMS")
  field(AFT,"PRIOR POS")
  field(OAFT,"")
  field(OPPV,"$(P)MONO01_OPT_SCAN.P2PV  CA NMS")
  field(ORPV,"$(P)MONO01_OPT_SCAN.R2PV  CA NMS")
  field(SP,"-1")
  field(OSP,"$(P)MONO01_OPT_SCAN.P2SP  CA NMS")
  field(EP,"1")
  field(OEP,"$(P)MONO01_OPT_SCAN.P2EP  CA NMS")
  field(NP,"41")
  field(ONP,"$(P)MONO01_OPT_SCAN.NPTS  CA NMS")
  field(SC,"1")
  field(OSC,"$(P)MONO01_OPT_SCAN.EXSC  CA NMS")
  field(IMP,"$(P)MONO01_OPT_SCAN.MPTS  NPP NMS")
  field(IACT,"$(P)MONO01_OPT_SCAN.BUSY  NPP NMS")
}

record(mbbo, "$(P)MONO01_OPT_SCAN_P2"){
  field(DESC, "2nd Positioner Selection")
  field(DTYP, "Raw Soft Channel")
  field(ZRVL, 1)
  field(ZRST, "NONE")
  field(ONVL, 2)
  field(ONST, "Table B1 Height")
  field(TWVL, 3)
  field(TWST, "Table B2 Height")
  field(THVL, 4)
  field(THST, "Table C1 Height")
  field(FRVL, 5)
  field(FRST, "Table C2 Height")
  field(VAL, 0)
  field(PINI, "YES")
}

record(fanout, "_$(P)MONO01_OPT_SCAN_P2SP"){
  field(LNK1,"_$(P)MONO01_OPT_SCAN_P2_NOSP")
  field(LNK2,"_$(P)MONO01_OPT_SCAN_P2_B1SP")
  field(LNK3,"_$(P)MONO01_OPT_SCAN_P2_B2SP")
  field(LNK4,"_$(P)MONO01_OPT_SCAN_P2_C1SP")
  field(LNK5,"_$(P)MONO01_OPT_SCAN_P2_C2SP")
  field(SELM,"Specified")
  field(SELL,"$(P)MONO01_OPT_SCAN_P2.RVAL CP")
}
record(fanout, "_$(P)MONO01_OPT__SCAN_P2RB"){
  field(LNK1,"_$(P)MONO01_OPT_SCAN_P2_NORB")
  field(LNK2,"_$(P)MONO01_OPT_SCAN_P2_B1RB")
  field(LNK3,"_$(P)MONO01_OPT_SCAN_P2_B2RB")
  field(LNK4,"_$(P)MONO01_OPT_SCAN_P2_C1RB")
  field(LNK5,"_$(P)MONO01_OPT_SCAN_P2_C2RB")
  field(SELM,"Specified")
  field(SELL,"$(P)MONO01_OPT_SCAN_P2.RVAL CP")
}

record(stringout, "_$(P)MONO01_OPT_SCAN_P2_NOSP"){
  field(VAL,"")
  field(OUT,"$(P)MONO01_OPT_SCAN_PARMS2.PPV")
}
record(stringout, "_$(P)MONO01_OPT_SCAN_P2_B1SP"){
  field(VAL,"MCTTBL01:HEIGHT")
  field(OUT,"$(P)MONO01_OPT_SCAN_PARMS2.PPV")
}
record(stringout, "_$(P)MONO01_OPT_SCAN_P2_B2SP"){
  field(VAL,"MCTTBL02:HEIGHT")
  field(OUT,"$(P)MONO01_OPT_SCAN_PARMS2.PPV")
}
record(stringout, "_$(P)MONO01_OPT_SCAN_P2_C1SP"){
  field(VAL,"MCTTBL03:HEIGHT")
  field(OUT,"$(P)MONO01_OPT_SCAN_PARMS2.PPV")
}
record(stringout, "_$(P)MONO01_OPT_SCAN_P2_C2SP"){
  field(VAL,"MCTTBL04:HEIGHT")
  field(OUT,"$(P)MONO01_OPT_SCAN_PARMS2.PPV")
}
record(stringout, "_$(P)MONO01_OPT_SCAN_P2_NORB"){
  field(VAL,"")
  field(OUT,"$(P)MONO01_OPT_SCAN_PARMS2.RPV")
}
record(stringout, "_$(P)MONO01_OPT_SCAN_P2_B1RB"){
  field(VAL,"MCTTBL01:HEIGHT.RBV")
  field(OUT,"$(P)MONO01_OPT_SCAN_PARMS2.RPV")
}
record(stringout, "_$(P)MONO01_OPT_SCAN_P2_B2RB"){
  field(VAL,"MCTTBL02:HEIGHT.RBV")
  field(OUT,"$(P)MONO01_OPT_SCAN_PARMS2.RPV")
}
record(stringout, "_$(P)MONO01_OPT_SCAN_P2_C1RB"){
  field(VAL,"MCTTBL03:HEIGHT.RBV")
  field(OUT,"$(P)MONO01_OPT_SCAN_PARMS2.RPV")
}
record(stringout, "_$(P)MONO01_OPT_SCAN_P2_C2RB"){
  field(VAL,"MCTTBL04:HEIGHT.RBV")
  field(OUT,"$(P)MONO01_OPT_SCAN_PARMS2.RPV")
}
